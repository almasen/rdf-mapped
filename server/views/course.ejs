<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta property="og:type" content="">
    <meta name="description" content="Vitae Researcher Development Framework Mapped to Linkedin Learning">
    <!-- //TODO: -->

    <%- include('./components/stylesheets'); -%>

    <%- include('./components/scripts'); -%>

    <script>
        const submitMissingRecommendation = () => {
            document.getElementById("missingRecommendations").submit();
            // alert("We have been notified that recommendations are missing from this page. \nThank you very much for you help!");
            document.getElementById("missingRecommendationsContainer").classList.remove("active");
            document.getElementById("missingRecommendationsContainer").classList.add("disabled");
            document.getElementById("missingRecommendationsText").innerText = "No similar courses. \nThank you for letting us know about this issue.";
        };
    </script>

    <% if (course) { %>
        <title>Course: <%= course.title _%></title>
    <% } else { %>
        <title>Course</title>
    <% } %>

</head>
<body>
    <%- include('./components/header'); -%>

    <main class="page">
        <section class="clean-block features">
            <div class="container">
                <div class="block-heading">
                    <a href="<%= course.hyperlink %>" target="_blank" rel="noopener noreferrer"><h2 class="text-info"><%= course.title %></h2></a>
                    <p>&nbsp;</p>
                    <ol class="breadcrumb" style="background-color: rgb(228,241,255);opacity: 1;">
                        <li class="breadcrumb-item"><a href="/course?capability=<%= course.capabilityId %>"><span><%= course.capabilityTitle %></span></a></li>
                        <li class="breadcrumb-item"><a href="/course?category=<%= course.categoryId %>"><span><%= course.categoryTitle %></span></a></li>
                        <li class="breadcrumb-item"><a href="/course?competency=<%= course.competencyId %>"><span><%= course.competencyTitle %></span></a></li>
                    </ol>
                </div>
                <div class="row" style="margin: 26.5;">
                    <div class="col-xl-8">
                        <h2 class="text-info">Course details:</h2>
                        <p></p>
                        <p>Title: <%= course.title %></p>
                        <p>Capability: <%= course.capabilityTitle %></p>
                        <p>Category: <%= course.categoryTitle %></p>
                        <p>Competency: <%= course.competencyTitle %></p>
                        <p>Course level(s): Phase <%= course.phases.join("/") %></p>
                        <!-- <p>Rating:&nbsp;&nbsp;<i class="fas fa-star" style="color: rgb(255,195,0);"></i></p> -->
                        <h5>Watch this course <a href="<%= course.hyperlink %>" target="_blank" rel="noopener noreferrer">here</a></h5>
                        <p style="text-align: right; font-size: small;">Flag any inappropriate info: <a href="#reportContentModal" data-toggle="modal"><i class="material-icons" style="color: rgb(215,21,33);">flag</i></a></p>
                    </div>
                    <%- include('./components/report-content'); -%>
                    <div class="col">
                        <h2 class="text-info">Similar courses</h2>
                        <p>You might also be interested in these:</p>
                        <ul class="list-group">
                        <!-- <ul class="list-group list-group-flush"> // TODO: -->
                            <% if (similarCourseRecords.length > 0) { %>
                                <% similarCourseRecords.forEach(e => { %>
                                <a href="<%= '/course/' + e.id %>" class="list-group-item list-group-item-action"><%= e.title %></a>
                                <!-- <li class="list-group-item"><span></span></li> -->
                                <% }); %>
                            <% } else { %>
                                <button type="button" id="missingRecommendationsContainer" class="list-group-item active">
                                    <div onclick="submitMissingRecommendation();">
                                        <form action="/bugreport" method="POST" id="missingRecommendations" target="dummyframe">
                                            <span id="missingRecommendationsText">We could not find similar courses. <i class="material-icons"> sentiment_very_dissatisfied </i> Please consider flagging this simply by clicking on this field. </span>
                                            <input id="email" name="email" value="missing-recommendations" hidden>
                                            <input id="report" name="report" value="Missing recommendations for course 'id:<%= course.id %>'" hidden>
                                        </form>
                                    </div>
                                </button>
                            <% } %>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        <iframe name="dummyframe" id="dummyframe" style="display: none;"></iframe>
    </main>

    <%- include('./components/footer'); -%>
</body>
</html>