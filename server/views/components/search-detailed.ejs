<div class="block-heading">
    <p>&nbsp;</p>
    <h2 class="text-info">Detailed Search</h2>
</div>
<div class="row">
    <div style="padding-bottom: 1rem;">
        <p style="text-align: justify;">Use the filters below in any order and optionally provide a keyword to search
            by. The filters do not automatically update each other, therefore you might combine filters that yield no
            results. In such cases, simply click your browser's back button to jump back here and refine the search. The
            keyword is <b>not</b> case sensitive, so do not worry about capitalising.</p>
    </div>
</div>
<form action="/course" method="GET" name="detailedSelectForm" id="detailedSelectForm">
    <div class="form-row">
        <div class="col">
            <select class="custom-select" name="capability" id="detailedSelectCapability">
                <option value="-1" selected>Capability</option>
                <% if (capabilities.length > 0) { %>
                <% capabilities.forEach(e => { %>
                <option value="<%= e.id %>"><%= e.title %></option>
                <% }); %>
                <% } %>
            </select>
        </div>
        <div class="col">
            <select class="custom-select" name="category" id="detailedSelectCategory">
                <option value="-1" selected>Category</option>
                <% if (categories.length > 0) { %>
                <% categories.forEach(e => { %>
                <option value="<%= e.id %>"><%= e.title %></option>
                <% }); %>
                <% } %>
            </select>
        </div>
        <div class="col">
            <select class="custom-select" name="competency" id="detailedSelectCompetency">
                <option value="-1" selected>Competency</option>
                <% if (competencies.length > 0) { %>
                <% competencies.forEach(e => { %>
                <option value="<%= e.id %>"><%= e.title %></option>
                <% }); %>
                <% } %>
            </select>
        </div>
        <div class="col">
            <select class="custom-select" name="phase" id="detailedSelectPhase">
                <option value="-1" selected>Level</option>
                <% if (phases.length > 0) { %>
                <% phases.forEach(e => { %>
                <option value="<%= e.id %>"><%= e.id %></option>
                <% }); %>
                <% } %>
            </select>
        </div>
        <div class="col-3">
            <div class="input-group mb-2">
                <div class="input-group-prepend">
                    <div class="input-group-text">
                        <span class="material-icons">search</span>
                    </div>
                </div>
                <input type="text" class="form-control" name="keyword" id="keywordSearch" placeholder="Keyword">
            </div>
        </div>
        <div class="col-auto" style="padding-left:20px; padding-right: 18px;">
            <div class="row">
                <div class="custom-control custom-radio">
                    <input type="radio" id="courseVideoRadio21" name="detailedSearchCourseVideo" value="course" class="custom-control-input"
                        checked>
                    <label class="custom-control-label" for="courseVideoRadio21">Course</label>
                </div>
            </div>
            <div class="row">
                <div class="custom-control custom-radio">
                    <input type="radio" id="courseVideoRadio22" name="detailedSearchCourseVideo" value="video" class="custom-control-input">
                    <label class="custom-control-label" for="courseVideoRadio22">Video</label>
                </div>
            </div>
        </div>
        <div class="col">
            <button type="submit" class="btn btn-primary mb-2">Search</button>
        </div>
    </div>
</form>
<script>
    $(document).ready(() => {
        $('#detailedSelectCapability').select2();
        $('#detailedSelectCategory').select2();
        $('#detailedSelectCompetency').select2();
        $('#detailedSelectPhase').select2();
    });
    $.fn.select2.defaults.set("theme", "bootstrap");
    document.forms.detailedSelectForm.detailedSearchCourseVideo.forEach(radio => {
        radio.addEventListener('change', () => {
            document.detailedSelectForm.action = ("/" + document.forms.detailedSelectForm.detailedSearchCourseVideo.value);
        })
    });
</script>